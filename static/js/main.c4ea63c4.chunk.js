(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(32)},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(8),c=a.n(r);function i(e,t){return function(a){return n.a.createElement(e,Object.assign({},t,a))}}var l=function(){var e=[];return{createMessage:function(t){return e.unshift(t),t},fetchMessages:function(){return new Promise(function(t,a){setTimeout(function(){return t(e)},1e3)})}}}(),o=a(11),u=a(1),m=a(2),d=a(4),h=a(3),g=a(5),f=i(function(e){function t(){var e,a;Object(u.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={error:!1,messages:[],loading:!0},a.reload=function(){a.setState({loading:!0,error:!1}),a.fetchMessages()},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"fetchMessages",value:function(){var e=this;this.props.fetchMessages().then(function(t){e.setState({loading:!1,messages:t})})}},{key:"componentDidMount",value:function(){this.fetchMessages()}},{key:"render",value:function(){return this.props.children(Object(o.a)({},this.state,{reload:this.reload}))}}]),t}(n.a.PureComponent),l),p=a(10),v=a(9);a(18),a(27);function b(e){return n.a.createElement("svg",Object.assign({},e,{height:"100px",width:"100px",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100"}),n.a.createElement("g",null,n.a.createElement("path",{d:"M5273.1,2400.1v-2c0-2.8-5-4-9.7-4s-9.7,1.3-9.7,4v2c0,1.8,0.7,3.6,2,4.9l5,4.9c0.3,0.3,0.4,0.6,0.4,1v6.4     c0,0.4,0.2,0.7,0.6,0.8l2.9,0.9c0.5,0.1,1-0.2,1-0.8v-7.2c0-0.4,0.2-0.7,0.4-1l5.1-5C5272.4,2403.7,5273.1,2401.9,5273.1,2400.1z      M5263.4,2400c-4.8,0-7.4-1.3-7.5-1.8v0c0.1-0.5,2.7-1.8,7.5-1.8c4.8,0,7.3,1.3,7.5,1.8C5270.7,2398.7,5268.2,2400,5263.4,2400z"}),n.a.createElement("path",{d:"M5268.4,2410.3c-0.6,0-1,0.4-1,1c0,0.6,0.4,1,1,1h4.3c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1H5268.4z"}),n.a.createElement("path",{d:"M5272.7,2413.7h-4.3c-0.6,0-1,0.4-1,1c0,0.6,0.4,1,1,1h4.3c0.6,0,1-0.4,1-1C5273.7,2414.1,5273.3,2413.7,5272.7,2413.7z"}),n.a.createElement("path",{d:"M5272.7,2417h-4.3c-0.6,0-1,0.4-1,1c0,0.6,0.4,1,1,1h4.3c0.6,0,1-0.4,1-1C5273.7,2417.5,5273.3,2417,5272.7,2417z"}),n.a.createElement("path",{d:"M75.8,37.6v-9.3C75.8,14.1,64.2,2.5,50,2.5S24.2,14.1,24.2,28.3v9.3c-7,0.6-12.4,6.4-12.4,13.6v32.6    c0,7.6,6.1,13.7,13.7,13.7h49.1c7.6,0,13.7-6.1,13.7-13.7V51.2C88.3,44,82.8,38.2,75.8,37.6z M50,15.6c7,0,12.7,5.7,12.7,12.7v9.1    H37.3v-9.1C37.3,21.3,43,15.6,50,15.6z"})))}var E=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){var t=a.state.isMessageEmpty,s=e.target.value;t&&""!==s?a.setState({isMessageEmpty:!1}):t||""!==s||a.setState({isMessageEmpty:!0})},a.handleSubmit=function(e){e.preventDefault();var t=a.textareaRef.current.value,s=a.checkboxRef.current.checked;a.validateMessage(t)&&(a.props.onNewMessage({isPrivate:s,text:t,timestamp:Date.now(),justAdded:!0}),a.resetErrorState(),a.resetFields())},a.textareaRef=n.a.createRef(),a.checkboxRef=n.a.createRef(),a.state={error:null,isMessageEmpty:!0},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"resetErrorState",value:function(){this.setState({isMessageEmpty:!0,error:!1})}},{key:"resetFields",value:function(){this.textareaRef.current.value="",this.checkboxRef.current.checked=!1}},{key:"validateMessage",value:function(e){return!!e}},{key:"render",value:function(){return n.a.createElement("form",{onSubmit:this.handleSubmit,className:"message-editor"},n.a.createElement("label",{className:"message-editor__label",htmlFor:"new-message"},"Ecrire un message"),n.a.createElement("textarea",{onChange:this.handleChange,id:"new-message",ref:this.textareaRef,className:"message-editor__text",rows:"2"}),n.a.createElement("p",{className:"message-editor__actions"},n.a.createElement("input",{id:"private",ref:this.checkboxRef,type:"checkbox"}),n.a.createElement("label",{htmlFor:"private",className:"message-editor__visibility"},n.a.createElement(b,null),"Message priv\xe9"),n.a.createElement("input",{disabled:this.state.isMessageEmpty,type:"submit",value:"Publier",className:"button message-editor__submit"})))}}]),t}(n.a.Component),M=(a(28),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={justAdded:!!e.justAdded},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.justAdded&&setTimeout(function(){e.setState({justAdded:!1})},100)}},{key:"render",value:function(){var e=this.props,t=e.text,a=e.timestamp,s=e.isPrivate,r=this.state.justAdded?{borderColor:"orange",opacity:0}:null;return n.a.createElement("article",{className:"message",style:r},n.a.createElement("header",{className:"message__infos"},n.a.createElement("span",{className:"message__info"},new Date(a).toLocaleString()),s&&n.a.createElement(b,null)),n.a.createElement("p",{className:"message__text"},t))}}]),t}(n.a.Component));a(29);function j(e){var t=e.message,a=e.children;return n.a.createElement("article",{className:"info-message"},n.a.createElement("p",{className:"info-message__text"},t),a)}a(30);var y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleScroll=function(e){var t=window.pageYOffset;console.log(t),t>120&&!a.state.shouldReduceHeader?a.setState({shouldReduceHeader:!0}):t<120&&a.state.shouldReduceHeader&&a.setState({shouldReduceHeader:!1})},a.createMessage=function(e){var t=a.props.createMessage(e);a.setState(function(e){var a=e.messages;return{messages:[t].concat(Object(v.a)(a))}})},a.reloadMessages=function(){a.props.reload()},a.state={messages:e.messages?e.messages:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"getMessagesList",value:function(){var e=this.state.messages,t=this.props,a=t.loading,s=t.error;return a?n.a.createElement("h3",{className:"loader"},"Chargement des messages..."):s?n.a.createElement(j,{message:"Une erreur s'est produite lors de la r\xe9cup\xe9ration de vos messages."},n.a.createElement("button",{className:"button",style:{marginTop:"1rem"},onClick:this.reloadMessages},"R\xe9ssayer")):0===e.length?n.a.createElement(j,{message:"Vous n'avez aucun message \xe0 afficher."}):e.map(function(e){var t=e.timestamp,a=Object(p.a)(e,["timestamp"]);return n.a.createElement(M,Object.assign({key:t,timestamp:t},a))})}},{key:"render",value:function(){var e=this.getMessagesList(),t=this.state.shouldReduceHeader;return n.a.createElement("main",null,n.a.createElement("header",{className:t?"scrolled":null},n.a.createElement("h2",{className:"title"},"LiveMessages"),n.a.createElement(E,{className:"app-message-editor",onNewMessage:this.createMessage})),n.a.createElement("section",{className:"messages"},n.a.createElement("h3",{className:"messages__title"},"Messages publi\xe9s"),e))}}]),t}(n.a.Component),O=(a(31),i(y,l));var w=document.getElementById("root");c.a.render(n.a.createElement(function(){return n.a.createElement("div",{className:"App"},n.a.createElement(f,null,O))},null),w)}},[[12,1,2]]]);
//# sourceMappingURL=main.c4ea63c4.chunk.js.map