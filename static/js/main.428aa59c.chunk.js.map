{"version":3,"sources":["../node_modules/typescript/lib sync","withService.jsx","MessagesService.js","FetchMessages.jsx","MessageEditor.jsx","SvgPadLock.jsx","MessageItem.jsx","InfoMessage.jsx","MessagesView.jsx","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","withService","Component","service","props","react_default","a","createElement","Object","assign","MessagesService","_messages","createMessage","message","unshift","fetchMessages","Promise","reject","setTimeout","_React$PureComponent","FetchMessages","_getPrototypeOf2","_this","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","error","messages","loading","reload","setState","inherits","createClass","key","value","_this2","then","children","objectSpread","React","PureComponent","MessageEditor","handleChange","event","isMessageEmpty","target","handleSubmit","preventDefault","textareaRef","current","checked","checkboxRef","validateMessage","onNewMessage","isPrivate","text","timestamp","Date","now","resetErrorState","resetFields","createRef","onSubmit","className","for","onChange","ref","rows","type","disabled","SvgPadLock","height","width","fill","xmlns","version","x","y","viewBox","d","MessageItem","_ref","toLocaleString","InfoMessage","MessagesView","createdMessage","toConsumableArray","reloadMessages","_this$props","style","fontWeight","InfoMessage_InfoMessage","marginTop","onClick","map","messageList","getMessagesList","MessageEditor_MessageEditor","MessagesViewContainer","rootElement","document","getElementById","ReactDOM","render","src_FetchMessages"],"mappings":"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","file":"static/js/main.428aa59c.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 193;","import React from \"react\";\n\nexport default function withService(Component, service) {\n  return props => <Component {...service} {...props} />;\n}\n","const GET_RESPONSE_DELAY = 1000;\n\nconst MessagesService = (function() {\n  const _messages = [];\n\n  return {\n    createMessage(message) {\n      _messages.unshift(message);\n      return message;\n    },\n    fetchMessages() {\n      return new Promise((resolve, reject) => {\n        setTimeout(() => resolve(_messages), GET_RESPONSE_DELAY);\n      });\n    }\n  };\n})();\n\nexport default MessagesService;\n","import React from \"react\";\nimport withService from \"./withService\";\nimport MessagesService from \"./MessagesService\";\n\nexport class FetchMessages extends React.PureComponent {\n  state = {\n    error: false,\n    messages: [],\n    loading: true\n  };\n\n  fetchMessages() {\n    this.props.fetchMessages().then(messages => {\n      this.setState({\n        loading: false,\n        messages\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.fetchMessages();\n  }\n\n  reload = () => {\n    this.setState({\n      loading: true,\n      error: false\n    });\n    this.fetchMessages();\n  };\n\n  render() {\n    return this.props.children({ ...this.state, reload: this.reload });\n  }\n}\n\nexport default withService(FetchMessages, MessagesService);\n","import React from \"react\";\nimport \"./MessageEditor.css\";\nimport { collapseTextChangeRangesAcrossMultipleVersions } from \"typescript\";\n\nexport default class MessageEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.textareaRef = React.createRef();\n    this.checkboxRef = React.createRef();\n    this.state = {\n      error: null,\n      isMessageEmpty: true\n    };\n  }\n\n  resetErrorState() {\n    this.setState({\n      isMessageEmpty: true,\n      error: false\n    });\n  }\n\n  resetFields() {\n    this.textareaRef.current.value = \"\";\n    this.checkboxRef.current.checked = false;\n  }\n\n  handleChange = (event) => {\n    const { isMessageEmpty } = this.state;\n    const { value } = event.target;\n    if (isMessageEmpty && value !== \"\") {\n      this.setState({\n        isMessageEmpty: false\n      });\n    } \n    else if (!isMessageEmpty && value === \"\") {\n      this.setState({\n        isMessageEmpty: true\n      });\n    }\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const { value } = this.textareaRef.current;\n    const { checked } = this.checkboxRef.current;\n\n    if (!this.validateMessage(value)) return;\n\n    this.props.onNewMessage({\n      isPrivate: checked,\n      text: value,\n      timestamp: Date.now()\n    });\n\n    this.resetErrorState();\n    this.resetFields();\n  };\n\n  validateMessage(text) {\n    return !!text;\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit} className=\"message-editor\">\n        <label className=\"message-editor__label\" for=\"new-message\">Ecrire un message</label>\n        <textarea\n          onChange={this.handleChange}\n          id=\"new-message\"\n          ref={this.textareaRef}\n          className=\"message-editor__text\"\n          rows=\"2\"\n        />\n        <p className=\"message-editor__actions\">\n          <input id=\"private\" ref={this.checkboxRef} type=\"checkbox\" />\n          <label for=\"private\" className=\"message-editor__visibility\">\n            Message privé\n          </label>\n          <input\n            disabled={this.state.isMessageEmpty}\n            type=\"submit\"\n            value=\"Publier\"\n            className=\"button message-editor__submit\"\n          />\n        </p>\n      </form>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default function SvgPadLock(props) {\n  return (\n    <svg\n      {...props}\n      height=\"100px\"\n      width=\"100px\"\n      fill=\"#000000\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      version=\"1.1\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 100 100\"\n    >\n      <g>\n            <path d=\"M5273.1,2400.1v-2c0-2.8-5-4-9.7-4s-9.7,1.3-9.7,4v2c0,1.8,0.7,3.6,2,4.9l5,4.9c0.3,0.3,0.4,0.6,0.4,1v6.4     c0,0.4,0.2,0.7,0.6,0.8l2.9,0.9c0.5,0.1,1-0.2,1-0.8v-7.2c0-0.4,0.2-0.7,0.4-1l5.1-5C5272.4,2403.7,5273.1,2401.9,5273.1,2400.1z      M5263.4,2400c-4.8,0-7.4-1.3-7.5-1.8v0c0.1-0.5,2.7-1.8,7.5-1.8c4.8,0,7.3,1.3,7.5,1.8C5270.7,2398.7,5268.2,2400,5263.4,2400z\" />\n            <path d=\"M5268.4,2410.3c-0.6,0-1,0.4-1,1c0,0.6,0.4,1,1,1h4.3c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1H5268.4z\" />\n            <path d=\"M5272.7,2413.7h-4.3c-0.6,0-1,0.4-1,1c0,0.6,0.4,1,1,1h4.3c0.6,0,1-0.4,1-1C5273.7,2414.1,5273.3,2413.7,5272.7,2413.7z\" />\n            <path d=\"M5272.7,2417h-4.3c-0.6,0-1,0.4-1,1c0,0.6,0.4,1,1,1h4.3c0.6,0,1-0.4,1-1C5273.7,2417.5,5273.3,2417,5272.7,2417z\" />\n          <path d=\"M75.8,37.6v-9.3C75.8,14.1,64.2,2.5,50,2.5S24.2,14.1,24.2,28.3v9.3c-7,0.6-12.4,6.4-12.4,13.6v32.6    c0,7.6,6.1,13.7,13.7,13.7h49.1c7.6,0,13.7-6.1,13.7-13.7V51.2C88.3,44,82.8,38.2,75.8,37.6z M50,15.6c7,0,12.7,5.7,12.7,12.7v9.1    H37.3v-9.1C37.3,21.3,43,15.6,50,15.6z\" />\n        </g>\n    </svg>\n  );\n}\n","import React from \"react\";\nimport \"./MessageItem.css\";\nimport SvgPadLock from \"./SvgPadLock\";\n\nexport default function MessageItem({ text, timestamp, isPrivate }) {\n  return (\n    <article className=\"message\">\n      <header className=\"message__infos\">\n        <span className=\"message__info\">{new Date(timestamp).toLocaleString()}</span>\n        {isPrivate && <SvgPadLock />}\n      </header>\n      <p className=\"message__text\">{text}</p>\n    </article>\n  );\n}\n","import React from \"react\";\nimport \"./InfoMessage.css\";\n\nexport default function InfoMessage({ message, children }) {\n  return (\n    <article className=\"info-message\">\n      <p className=\"info-message__text\">\n        {message}\n      </p>\n      {children}\n    </article>\n  );\n}\n","import React from \"react\";\nimport MessageEditor from \"./MessageEditor\";\nimport MessageItem from \"./MessageItem\";\nimport InfoMessage from \"./InfoMessage\";\nimport \"./MessagesView.css\";\n\nexport default class MessagesView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      messages: props.messages ? props.messages : []\n    };\n  }\n\n  createMessage = message => {\n    const createdMessage = this.props.createMessage(message);\n    this.setState(({ messages }) => ({\n      messages: [createdMessage, ...messages]\n    }));\n  };\n\n  reloadMessages = () => {\n    this.props.reload();\n  };\n\n  getMessagesList() {\n    const { messages } = this.state;\n    const { loading, error } = this.props;\n\n    if (loading) {\n      return <h3 style={{ fontWeight: \"normal\" }}>Chargement des messages...</h3>;\n    }\n\n    if (error) {\n      return (\n        <InfoMessage message=\"Une erreur s'est produite lors de la récupération de vos messages.\">\n          <button className=\"button\" style={{ marginTop: '1rem' }} onClick={this.reloadMessages}>\n            Réssayer\n          </button>\n        </InfoMessage>\n      );\n    }\n\n    if (messages.length === 0) {\n      return (\n        <InfoMessage\n          message=\"Publiez votre premier message en utilisant la zone de texte ci-dessus !\" />\n      );\n    }\n\n    // extraire ??\n    return messages.map(MessageItem);\n  }\n\n  render() {\n    const messageList = this.getMessagesList();\n\n    return (\n      <main>\n        <header>\n          <h2 className=\"title\">LiveMessages</h2>\n          <MessageEditor\n            className=\"app-message-editor\"\n            onNewMessage={this.createMessage}\n          />\n        </header>\n        <section className=\"messages\">\n          <h3 className=\"messages__title\">Messages publiés</h3>\n          {messageList}\n        </section>\n      </main>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport withService from \"./withService\";\nimport MessagesService from \"./MessagesService\";\nimport FetchMessages from \"./FetchMessages\";\nimport MessagesView from \"./MessagesView\";\n\nimport \"./styles.css\";\n\nconst MessagesViewContainer = withService(MessagesView, MessagesService);\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <FetchMessages>{MessagesViewContainer}</FetchMessages>\n    </div>\n  );\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}